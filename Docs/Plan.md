title: Test plan
numbersections: true
# План тестирования веб-сервиса "Путешествие дня"

# Перечень автоматизируемых сценариев

Разработка автоматизируемых сценариев планируется на уровне интеграционного тестирования

Виды тестирования
- модульное с проверкой отдельной страниц
- функциональное на соответствие требования
- тестирование пользовательского интерфейса
    
Будет тестироваться  
- запуск сервиса на базах данных MySQL и PostgreSQL 
- автоматизация оплаты тура по карте (Payment Gate)
- автоматизация оплаты тура в кредит по карте (Credit Gate)

## 1. Позитивные сценарии

**1.1 Запуск сервиса на разных базах данных**

***Входные данные/предусловие***

Наличие файла aqa-shop.jar, директории gate-simulator

***Шаги***

1. Вход в директорию, содержащую aqa-shop.jar
1. Запуск в терминале команды docker compose up
1. Запуск команды java -jar aqa-shop.jar для MySQL ИЛИ для PostgreSQL
1. Запуск симулятора в директории gate-simulator командой npm start 

***Ожидаемый результат***

Запуск сервиса без сообщений об ошибке. Последнее сообщение в логе может быть "Completed initialization in .. ms"

**1.2 Автоматизация сценария "Оплата тура по карте (Payment Gate)"**

***Входные данные/предусловие***

Запущенный сервис aqa-shop.jar
Запущенный симулятор gate-simulator

***Шаги сценария, который автоматизируем***

1. Вход на http://localhost:8080
1. Нажатие кнопки "Купить" 
1. Заполнение формы корректными значениями из файла data.json
    1. Номер карты 4444 4444 4444 4441 
    1. Месяц от 01 до 12 в формате двух знаков (срок действия карты больше текущей даты)
    1. Год в формате двух знаков (срок действия карты больше текущей даты)
    1. CVC в формате трех знаков
1. Отправка формы по нажатию кнопки "Продолжить"

***Ожидаемый результат***
1. Кнопка "Купить" подсвечена красным
1. Cообщение об успешной отправке формы: "Операция одобрена банком"
1. В базе данных, таблице order_entity добавлена запись с текущей датой и временем,
1. В базе данных, таблице order_payment добавлена запись c
   1. текущей датой и временем,
   1. transaction_id равным payment_id из таблице order_entity
   1. статусом APPROVED
   1. полем amount равным цене из рекламы сверху (по умолчанию 45 000 руб)
1. В базе данных, таблице payment_entity ничего не добавилось

**1.3 Автоматизация сценария "Оплата тура в кредит по карте (Credit Gate)"**

***Входные данные/предусловие***

Запущенный сервис aqa-shop.jar
Запущенный симулятор gate-simulator

***Шаги сценария, который автоматизируем***

1. Вход на http://localhost:8080
1. Нажатие кнопки "Купить в кредит" 
1. Заполнение формы корректными значениями из файла data.json 
    1. Номер карты 4444 4444 4444 4441 
    1. Месяц от 01 до 12 в формате двух знаков (срок действия карты больше текущей даты)
    1. Год в формате двух знаков (срок действия карты больше текущей даты)
    1. CVC в формате трех знаков
1. Отправка формы по нажатию кнопки "Продолжить"

***Ожидаемый результат***

1. Кнопка "Купить в кредит" подсвечена красным
1. Cообщение об успешной отправке формы: "Операция одобрена банком"
1. В базе данных, таблице order_entity добавлена запись с текущей датой и временем,  
1. В базе данных, таблице credit_request_entity добавлена запись c 
   1. текущей датой и временем, 
   1. bank_id равным payment_id из таблице order_entity
   1. статусом APPROVED
1. В базе данных, таблице payment_entity ничего не добавилось
   
## 2. Негативные сценарии

**2.1 Валидация полей для Оплаты картой**

***Входные данные/предусловие***

Запущенный сервис aqa-shop.jar
Запущенный симулятор gate-simulator

***ПредШаги***

1. Вход на http://localhost:8080
1. Нажатие кнопки "Купить" 

**2.1.1 Валидация числового поля номера карты для Оплаты картой**

***Шаг 3***

Заполнение буквами числового поля 

***Ожидаемый результат***

Невозможность ввести буквы

***Шаг 3***

Числовое поле ставлено пустым. Нажата кнопка "Продолжить"

***Ожидаемый результат***

Сообщение "Неверный формат"

***Шаг 3***

В числовое поле введено менее 16 цифр. Нажата кнопка "Продолжить"

***Ожидаемый результат***

***Шаг 3***

В числовое поле введено более 16 цифр.

***Ожидаемый результат***

Невозможность ввести лишние символы

**2.1.2 Валидация числового поля месяца для Оплаты картой**

***Шаг 3***

Заполнение буквами числового поля

***Ожидаемый результат***

Невозможность ввести буквы

***Шаг 3***

Числовое поле ставлено пустым. Нажата кнопка "Продолжить"

***Ожидаемый результат***

Сообщение "Неверный формат"

***Шаг 3***

В числовое поле введено менее 2 цифр. Нажата кнопка "Продолжить"

***Ожидаемый результат***

Сообщение "Неверный формат"

***Шаг 3***

В числовое поле введено более 2 цифр.

***Ожидаемый результат***

Невозможность ввести лишние символы


**2.1.3 Валидация числового поля года для Оплаты картой**

***Шаг 3***

Заполнение буквами числового поля

***Ожидаемый результат***

Невозможность ввести буквы

***Шаг 3***

Числовое поле ставлено пустым. Нажата кнопка "Продолжить"

***Ожидаемый результат***

Сообщение "Неверный формат"

***Шаг 3***

В числовое поле введено менее 2 цифр. Нажата кнопка "Продолжить"

***Шаг 3***

В числовое поле введено более 2 цифр.

***Ожидаемый результат***

Невозможность ввести лишние символы


**2.1.2 Валидация числового поля CVC для Оплаты картой**

***Шаг 3***

Заполнение буквами числового поля

***Ожидаемый результат***

Невозможность ввести буквы

***Шаг 3***

Числовое поле ставлено пустым. Нажата кнопка "Продолжить"

***Ожидаемый результат***

Сообщение "Неверный формат"

***Шаг 3***

В числовое поле введено менее 3 цифр. Нажата кнопка "Продолжить"

***Шаг 3***

В числовое поле введено более 3 цифр.

***Ожидаемый результат***

Невозможность ввести лишние символы


**2.1.3 Валидация полей даты (год и месяц) для Оплаты картой**

***Шаг 3***

Заполнение года и месяца, меньшей текущей даты. Нажатие кнопки "Продолжить"

***Ожидаемый результат***

Сообщение об ошибке "Истёк срок действия карты"

**2.1.4 Валидация поля владельца для Оплаты картой**

***Шаг 3***

Заполнение русскими буками или цифрами. Нажатие кнопки "Продолжить"

***Ожидаемый результат***

Сообщение об ошибке

**2.2 Ввод номеров карточек, отсутствующих в системе**

***Входные данные/предусловие***

Запущенный сервис aqa-shop.jar
Запущенный симулятор gate-simulator

***Шаги***

1. Вход на http://localhost:8080
1. Нажатие кнопки "Купить в кредит"
1. Заполнение формы корректными значениями из файла data.json
    1. Любой номер карты кроме 4444 4444 4444 4441 или 4444 4444 4444 4442
    1. Месяц от 01 до 12 в формате двух знаков (срок действия карты больше текущей даты)
    1. Год в формате двух знаков (срок действия карты больше текущей даты)
    1. CVC в формате трех знаков
1. Отправка формы по нажатию кнопки "Продолжить"

***Ожидаемый результат***

1. Сообщение "Ошибка! Банк отказал в проведении операции"
1. В базе данных, таблицах credit_request_entity, order_entity, order_payment ничего не добавилось

**2.3 Ввод номеров карточек, отклоненной системой, в сценарий "Оплата тура по карте (Payment Gate)"**

***Входные данные/предусловие***

Запущенный сервис aqa-shop.jar
Запущенный симулятор gate-simulator

***Шаги сценария, который автоматизируем***

1. Вход на http://localhost:8080
1. Нажатие кнопки "Купить"
1. Заполнение формы корректными значениями из файла data.json
   1. Номер карты 4444 4444 4444 4442
   1. Месяц от 01 до 12 в формате двух знаков (срок действия карты больше текущей даты)
   1. Год в формате двух знаков (срок действия карты больше текущей даты)
   1. CVC в формате трех знаков
1. Отправка формы по нажатию кнопки "Продолжить"

***Ожидаемый результат***
1. Кнопка "Купить" подсвечена красным
1. Cообщение об ошибке "Карточка отклонена банком"
1. В базе данных, таблице order_entity добавлена запись с текущей датой и временем,
1. В базе данных, таблице payment_entity добавлена запись c
   1. текущей датой и временем,
   1. bank_id равным payment_id из таблице order_entity
   1. статусом DECLINED
   1. полем amount равным цене из рекламы сверху (по умолчанию 45 000 руб)
1. В базе данных, таблице credit_request_entity ничего не добавилось

**2.4 Ввод номеров карточек, отклоненной системой, в сценарий "Оплата тура в кредит по карте (Credit Gate)"**

***Входные данные/предусловие***

Запущенный сервис aqa-shop.jar
Запущенный симулятор gate-simulator

***Шаги сценария, который автоматизируем***

1. Вход на http://localhost:8080
1. Нажатие кнопки "Купить в кредит"
1. Заполнение формы корректными значениями из файла data.json
   1. Номер карты 4444 4444 4444 4442
   1. Месяц от 01 до 12 в формате двух знаков (срок действия карты больше текущей даты)
   1. Год в формате двух знаков (срок действия карты больше текущей даты)
   1. CVC в формате трех знаков
1. Отправка формы по нажатию кнопки "Продолжить"

***Ожидаемый результат***

1. Кнопка "Купить в кредит" подсвечена красным
1. Cообщение об ошибке "Карточка отклонена банком"
1. В базе данных, таблице order_entity добавлена запись с текущей датой и временем,
1. В базе данных, таблице credit_request_entity добавлена запись c
   1. текущей датой и временем,
   1. bank_id равным payment_id из таблице order_entity
   1. статусом DECLINED
1. В базе данных, таблице payment_entity ничего не добавилось

# Перечень используемых инструментов с обоснованием выбора

- GitHub: система контроля версий и веб-сервис для хостинга IT-проектов. Автоматический запуск тестов при совершении
  новых коммитов.
- IntelliJ IDEA: одна из наиболее удобных современных сред разработки программного обеспечения
- Gradle: инструмент сборки и запуска тестов. Специально разработан для описания сборки, тестирования, развертывания,
  экспорта
- Java: один из самых популярных языков программирования для реализации тестов.
- JUnit5: библиотека для модульного тестирования программного обеспечения
- Selenide: фреймворк для автоматизированного тестирования веб-приложений
- Allure: фреймворк для создания отчетов (при необходимости)

# Перечень и описание возможных рисков при автоматизации

- Невыявление всех ошибок в коде или настройках окружения
- Неправильная оценка трудозатрат по тестированию
- Неполные или некорректные тестовые данные
- Сложности реализации формы, нечитаемоcть кода (отсутствие локаторов и прочее)

# Интервальная оценка с учётом рисков (в часах)

- Создание детального плана тестирования и техзадания - 4 часа
- Настройка тестового окружения - 3 часа
- Написание автотестов - 15 часов
- Запуск автотестов, проверка отчетов, занесение результатов запуска в протокол и баг-репорты (github) – 5 часов

# План сдачи работ (включая исправления)
- Создание детального плана тестирования и техзадания - 25.10.2021
- Настройка тестового окружения - 26.10.2021
- Написание автотестов - 11.11.2021
- Запуск автотестов, занесение результатов запуска в протокол и баг-репорты – 15.10.2021


